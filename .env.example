# ===================================================================
# Sublarr Configuration
# Copy this file to .env and adjust values.
#
# Docker Compose setup:
#   Dev:      docker compose up               (auto-loads docker-compose.override.yml)
#   Cardinal: VERSION=$(cat backend/VERSION) \
#               docker compose -f docker-compose.yml -f docker-compose.cardinal.yml up -d
#
# Compose interpolation vars (top section) are used by ${VAR} in compose files.
# App config vars (SUBLARR_*) are loaded into the container by the env_file setting.
# ===================================================================

# --- Compose Interpolation ----------------------------------------
VERSION=0.1.0        # Must match backend/VERSION — used as Docker image tag
PUID=1000
PGID=1000

# --- General ------------------------------------------------------
SUBLARR_PORT=5765
# SUBLARR_API_KEY=            # Set to enable API key auth (leave empty to disable)
SUBLARR_LOG_LEVEL=INFO
SUBLARR_LOG_FILE=/config/sublarr.log
SUBLARR_MEDIA_PATH=/media
SUBLARR_DB_PATH=/config/sublarr.db

# --- Ollama (required) -------------------------------------------
SUBLARR_OLLAMA_URL=http://localhost:11434
SUBLARR_OLLAMA_MODEL=qwen2.5:14b-instruct
SUBLARR_BATCH_SIZE=15
SUBLARR_REQUEST_TIMEOUT=90
SUBLARR_TEMPERATURE=0.3

# --- Translation --------------------------------------------------
SUBLARR_SOURCE_LANGUAGE=en
SUBLARR_TARGET_LANGUAGE=de
SUBLARR_SOURCE_LANGUAGE_NAME=English
SUBLARR_TARGET_LANGUAGE_NAME=German
# SUBLARR_PROMPT_TEMPLATE=    # Custom prompt (leave empty for auto-generated)

# --- Subtitle Providers -------------------------------------------
SUBLARR_PROVIDER_PRIORITIES=animetosho,jimaku,opensubtitles,subdl
# SUBLARR_PROVIDERS_ENABLED=  # Empty = all registered providers enabled

# OpenSubtitles.com (REST API v2 — api key required since 2024)
# SUBLARR_OPENSUBTITLES_API_KEY=
# SUBLARR_OPENSUBTITLES_USERNAME=
# SUBLARR_OPENSUBTITLES_PASSWORD=

# Jimaku (anime-focused, API token from account settings)
# SUBLARR_JIMAKU_API_KEY=

# SubDL (Subscene successor, REST API)
# SUBLARR_SUBDL_API_KEY=

# AnimeTosho — no auth needed

# --- Path Mapping (optional) -------------------------------------
# Map remote paths from *arr apps to local paths
# Format: "remote_prefix=local_prefix" (semicolon-separated for multiple)
# SUBLARR_PATH_MAPPING=/data/media=/mnt/media;/anime=/share/anime

# --- Sonarr (optional) -------------------------------------------
# SUBLARR_SONARR_URL=http://localhost:8989
# SUBLARR_SONARR_API_KEY=

# --- Radarr (optional) -------------------------------------------
# SUBLARR_RADARR_URL=http://localhost:7878
# SUBLARR_RADARR_API_KEY=

# --- Jellyfin/Emby (optional) ------------------------------------
# SUBLARR_JELLYFIN_URL=http://localhost:8096
# SUBLARR_JELLYFIN_API_KEY=

# --- Wanted System ------------------------------------------------
SUBLARR_WANTED_SCAN_INTERVAL_HOURS=6    # 0 = disabled
SUBLARR_WANTED_ANIME_ONLY=true
SUBLARR_WANTED_SCAN_ON_STARTUP=true
SUBLARR_WANTED_MAX_SEARCH_ATTEMPTS=3

# --- Upgrade System -----------------------------------------------
SUBLARR_UPGRADE_ENABLED=true
SUBLARR_UPGRADE_MIN_SCORE_DELTA=50
SUBLARR_UPGRADE_WINDOW_DAYS=7
SUBLARR_UPGRADE_PREFER_ASS=true         # SRT->ASS always upgrade

# --- Webhook Automation -------------------------------------------
SUBLARR_WEBHOOK_DELAY_MINUTES=5
SUBLARR_WEBHOOK_AUTO_SCAN=true
SUBLARR_WEBHOOK_AUTO_SEARCH=true
SUBLARR_WEBHOOK_AUTO_TRANSLATE=true

# --- Wanted Search Scheduler --------------------------------------
SUBLARR_WANTED_SEARCH_INTERVAL_HOURS=24 # 0 = disabled
SUBLARR_WANTED_SEARCH_ON_STARTUP=false
SUBLARR_WANTED_SEARCH_MAX_ITEMS_PER_RUN=50
