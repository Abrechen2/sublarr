---
phase: 23-machine-translation-detection
plan: 02
type: execute
wave: 2
depends_on: ["23-01"]
files_modified:
  - frontend/src/components/wanted/InteractiveSearchModal.tsx
  - frontend/src/api/client.ts
  - frontend/src/pages/Settings/
autonomous: false

must_haves:
  truths:
    - "MT detection results appear in provider search results UI as a badge with confidence %"
    - "User can configure MT score penalty (0 = disabled) and confidence threshold in Settings Providers"
  artifacts:
    - path: "frontend/src/components/wanted/InteractiveSearchModal.tsx"
      provides: "MT badge (e.g. 'MT 85%') per result when machine_translated"
    - path: "frontend/src/api/client.ts"
      provides: "InteractiveSearchResult type includes machine_translated?, mt_confidence?"
    - path: "frontend/src/pages/Settings/"
      provides: "Providers section: MT penalty, MT confidence threshold"
  key_links:
    - from: "frontend/src/components/wanted/InteractiveSearchModal.tsx"
      to: "result.machine_translated, result.mt_confidence"
    - from: "frontend"
      to: "config API"
      via: "providers.mt_penalty, providers.mt_confidence_threshold"
---

<objective>
Frontend: MT badge in provider search results; Settings Providers for MT penalty and confidence threshold.

Purpose: Users see which results are likely machine-translated (badge + confidence %) and can configure penalty and threshold in Settings.

Output: InteractiveSearchResult type extended; InteractiveSearchModal shows MT badge; Settings Providers has MT penalty and confidence threshold inputs.
</objective>

<execution_context>
@C:/Users/Dennis Wittke/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Dennis Wittke/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/23-machine-translation-detection/23-01-SUMMARY.md

@frontend/src/components/wanted/InteractiveSearchModal.tsx
@frontend/src/api/client.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Types and MT badge in search results</name>
  <files>
    frontend/src/api/client.ts
    frontend/src/components/wanted/InteractiveSearchModal.tsx
  </files>
  <action>
1. In client types: add to InteractiveSearchResult (or equivalent) optional machine_translated?: boolean, mt_confidence?: number.
2. In InteractiveSearchModal table: when result.machine_translated or result.mt_confidence is set, show a small badge (e.g. "MT" or "MT 85%") with tooltip "Likely machine-translated". Use muted or warning color.
  </action>
  <verify>
    Run: `cd frontend && npx tsc --noEmit` and `npm run lint`.
  </verify>
  <done>
    Search result type includes MT fields; modal shows MT badge with confidence when present.
  </done>
</task>

<task type="auto">
  <name>Task 2: Settings Providers MT config</name>
  <files>
    frontend/src/pages/Settings/
  </files>
  <action>
1. In Settings > Providers (or wherever provider config lives): add "MT score penalty" number input (e.g. -50 to 0, default -30; 0 = disabled). Add "MT confidence threshold" number input (0-100, default 50). Save to config (providers.mt_penalty, providers.mt_confidence_threshold). Help text: "Subtitles detected as machine-translated get this score penalty. Threshold: minimum confidence to apply penalty."
  </action>
  <verify>
    Run: `cd frontend && npm run build`. Save settings; confirm values persist.
  </verify>
  <done>
    Settings Providers has MT penalty and confidence threshold; values persist.
  </done>
</task>

</tasks>

<verification>
1. InteractiveSearchResult has machine_translated, mt_confidence; modal shows MT badge.
2. Settings: MT penalty and confidence threshold configurable.
</verification>

<success_criteria>
- MT badge with confidence % in provider search results.
- User can configure MT penalty and threshold in Settings Providers.
</success_criteria>

<output>
After completion, create `.planning/phases/23-machine-translation-detection/23-02-SUMMARY.md`
</output>
