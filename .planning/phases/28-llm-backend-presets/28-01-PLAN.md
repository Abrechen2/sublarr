---
phase: 28-llm-backend-presets
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - backend/routes/translate.py
  - frontend/src/pages/Settings/TranslationTab.tsx
  - frontend/src/api/client.ts
autonomous: false

must_haves:
  truths:
    - "Translation tab shows Add from Template option listing pre-configured templates (DeepSeek V3, Gemini 1.5 Flash, Claude Haiku, Mistral Medium, LM Studio local)"
    - "Selecting a template pre-fills API endpoint, model name, and recommended context window; user provides API key"
    - "Templates include a brief description of cost/quality tradeoff in the template picker"
  artifacts:
    - path: "backend/routes/translate.py"
      provides: "GET /api/v1/backends/templates returning template list with name, display_name, config_defaults, description"
    - path: "frontend/src/pages/Settings/TranslationTab.tsx"
      provides: "Template picker (Add from Template); pre-fill backend config from template; save as backend config"
    - path: "frontend/src/api/client.ts"
      provides: "getBackendTemplates()"
  key_links:
    - from: "frontend"
      to: "GET /backends/templates"
    - from: "frontend"
      to: "PUT /backends/<name>/config"
      via: "Pre-filled config from template + user API key"
---

<objective>
Backend + Frontend: Pre-configured LLM backend templates (DeepSeek, Gemini, Claude, Mistral, LM Studio); Add from Template in Translation tab; pre-fill endpoint, model, context window; user adds API key.

Purpose: New users can quickly add a known-good backend from a template instead of manually entering endpoint and model. Templates include cost/quality description.

Output: Backend defines templates (name, display_name, config_defaults dict, description); GET /backends/templates; Frontend "Add from Template" lists templates; on select, open or create backend card with form pre-filled from template; user fills API key and saves (PUT /backends/<name>/config).
</objective>

<execution_context>
@C:/Users/Dennis Wittke/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Dennis Wittke/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md

@backend/routes/translate.py
@frontend/src/pages/Settings/TranslationTab.tsx
@frontend/src/api/client.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Backend template definitions and API</name>
  <files>
    backend/routes/translate.py
  </files>
  <action>
1. Define templates list (in code or JSON): each has id/name (e.g. "deepseek_v3", "gemini_flash"), display_name ("DeepSeek V3", "Gemini 1.5 Flash"), config_defaults (dict: base_url, model, context_window or max_tokens, etc. per backend type), description (cost/quality one-liner). Suggested templates: DeepSeek V3, Gemini 1.5 Flash, Claude Haiku, Mistral Medium, LM Studio local.
2. GET /api/v1/backends/templates: return list of { name, display_name, config_defaults, description }. Config_defaults match keys expected by PUT /backends/<name>/config for the corresponding backend (e.g. openai_compat).
  </action>
  <verify>
    curl GET /backends/templates returns at least 5 templates with display_name and config_defaults.
  </verify>
  <done>
    Template list and GET /backends/templates implemented.
  </done>
</task>

<task type="auto">
  <name>Task 2: Frontend Add from Template and pre-fill</name>
  <files>
    frontend/src/pages/Settings/TranslationTab.tsx
    frontend/src/api/client.ts
  </files>
  <action>
1. Add getBackendTemplates() in client; useBackendTemplates() hook. In TranslationBackendsTab: add "Add from Template" button or dropdown that shows template list (display_name + description). On select: open the corresponding backend card (e.g. openai_compat for most templates) with form pre-filled from template.config_defaults (base_url, model, etc.); leave api_key empty for user to fill. User clicks Save to call existing PUT /backends/<name>/config with merged config (defaults + api_key).
2. If backend has no existing config, creating from template may require "Add" flow: create config for that backend name with defaults + user key. If backends are fixed (ollama, openai_compat, ...), map template to backend name and pre-fill that backend's form.
  </action>
  <verify>
    Run: `cd frontend && npx tsc --noEmit` and `npm run build`. Select template; form pre-fills; save persists.
  </verify>
  <done>
    Add from Template shows templates with description; selection pre-fills backend config; user adds API key and saves.
  </done>
</task>

</tasks>

<verification>
1. GET /backends/templates returns templates with display_name, config_defaults, description.
2. Frontend: Template picker; pre-fill backend form; save uses PUT /backends/<name>/config.
</verification>

<success_criteria>
- User can add a backend from a template; endpoint and model pre-filled; only API key needed.
- Templates include cost/quality description.
</success_criteria>

<output>
After completion, create `.planning/phases/28-llm-backend-presets/28-01-SUMMARY.md`
</output>
