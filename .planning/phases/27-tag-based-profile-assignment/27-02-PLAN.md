---
phase: 27-tag-based-profile-assignment
plan: 02
type: execute
wave: 2
depends_on: ["27-01"]
files_modified:
  - frontend/src/pages/Settings/
  - frontend/src/api/client.ts
  - frontend/src/hooks/useApi.ts
autonomous: false

must_haves:
  truths:
    - "User can create, edit, and delete tag mapping rules in Settings Language Profiles section"
    - "UI shows tag label and selected Language Profile per rule"
  artifacts:
    - path: "frontend/src/pages/Settings/"
      provides: "Tag rules management UI in Language Profiles section"
    - path: "frontend/src/api/client.ts"
      provides: "getTagRules, createTagRule, updateTagRule, deleteTagRule"
    - path: "frontend/src/hooks/useApi.ts"
      provides: "useTagRules, useCreateTagRule, useUpdateTagRule, useDeleteTagRule"
  key_links:
    - from: "frontend"
      to: "GET/POST/PUT/DELETE /api/v1/language-profiles/tag-rules"
---

<objective>
Frontend: Tag rule management UI in Settings Language Profiles.

Purpose: Users create and manage tag-to-profile rules (tag label, profile dropdown) from Settings.

Output: Settings > Language Profiles section: list of tag rules with add form (tag label + profile select), edit, delete; API client and hooks for tag rules.
</objective>

<execution_context>
@C:/Users/Dennis Wittke/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Dennis Wittke/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/27-tag-based-profile-assignment/27-01-SUMMARY.md

@frontend/src/pages/Settings/
@frontend/src/api/client.ts
@frontend/src/hooks/useApi.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: API client and hooks for tag rules</name>
  <files>
    frontend/src/api/client.ts
    frontend/src/hooks/useApi.ts
  </files>
  <action>
1. Add getTagRules(): GET /language-profiles/tag-rules. Add createTagRule({ tag_label, profile_id }), updateTagRule(id, { tag_label?, profile_id? }), deleteTagRule(id).
2. Hooks: useTagRules() query; useCreateTagRule(), useUpdateTagRule(), useDeleteTagRule() mutations with invalidation of useTagRules.
  </action>
  <verify>
    Run: `cd frontend && npx tsc --noEmit` and `npm run lint`.
  </verify>
  <done>
    API and hooks for tag rules CRUD.
  </done>
</task>

<task type="auto">
  <name>Task 2: Tag rules UI in Language Profiles</name>
  <files>
    frontend/src/pages/Settings/
  </files>
  <action>
1. In Settings > Language Profiles section (or new sub-tab): "Tag-based assignment" subsection. Table or list of rules: Tag label | Profile | Actions (Edit, Delete). Add form: text input for tag label, dropdown for Language Profile (from useLanguageProfiles or existing profile list), Add button.
2. Edit: inline or modal to change tag label and/or profile. Delete with confirmation.
  </action>
  <verify>
    Run: `cd frontend && npm run build`. Create/edit/delete rule; list updates.
  </verify>
  <done>
    Tag rules manageable in Settings Language Profiles.
  </done>
</task>

</tasks>

<verification>
1. API client and hooks for tag rules.
2. Settings UI: list, add, edit, delete tag rules.
</verification>

<success_criteria>
- User can manage tag mapping rules from Settings Language Profiles.
</success_criteria>

<output>
After completion, create `.planning/phases/27-tag-based-profile-assignment/27-02-SUMMARY.md`
</output>
