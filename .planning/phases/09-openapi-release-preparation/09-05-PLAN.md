---
phase: 09-openapi-release-preparation
plan: 05
type: execute
wave: 2
depends_on: ["09-01", "09-02", "09-03"]
files_modified:
  - CHANGELOG.md
  - docs/MIGRATION.md
  - docs/USER-GUIDE.md
  - docs/PROVIDERS.md
  - unraid/sublarr.xml
  - backend/version.py
  - docker-compose.yml
  - Dockerfile
autonomous: true

must_haves:
  truths:
    - "CHANGELOG.md documents all changes since v1.0.0-beta with Keep a Changelog format"
    - "Migration guide explains version renumber rationale and upgrade steps from v1.0.0-beta"
    - "User guide covers setup scenarios (Sonarr+Radarr, standalone, Docker) with troubleshooting"
    - "Unraid template is updated with new features and correct port/volume configuration"
  artifacts:
    - path: "CHANGELOG.md"
      provides: "Complete changelog for v0.9.0-beta release"
      contains: "0.9.0-beta"
    - path: "docs/MIGRATION.md"
      provides: "Migration guide from v1.0.0-beta to v0.9.0-beta"
      contains: "Migration"
    - path: "docs/USER-GUIDE.md"
      provides: "User guide with setup scenarios and troubleshooting"
      contains: "Setup"
    - path: "unraid/sublarr.xml"
      provides: "Updated Unraid template"
      contains: "0.9.0-beta"
  key_links:
    - from: "CHANGELOG.md"
      to: "backend/version.py"
      via: "Version string consistency"
      pattern: "0.9.0-beta"
    - from: "docs/MIGRATION.md"
      to: "CHANGELOG.md"
      via: "References changelog for detailed changes"
      pattern: "CHANGELOG"
---

<objective>
Prepare for v0.9.0-beta community launch: write CHANGELOG, migration guide, user guide, update plugin developer docs, update Unraid template, and ensure all version strings are consistent.

Purpose: Documentation is critical for community adoption. Users need a clear migration path from v1.0.0-beta, a setup guide for different scenarios, and a comprehensive changelog to understand what's new.

Output: CHANGELOG.md, docs/MIGRATION.md, docs/USER-GUIDE.md, updated docs/PROVIDERS.md, updated unraid/sublarr.xml.
</objective>

<execution_context>
@C:/Users/Dennis Wittke/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Dennis Wittke/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-openapi-release-preparation/09-RESEARCH.md
@.planning/phases/09-openapi-release-preparation/09-01-SUMMARY.md
@.planning/phases/09-openapi-release-preparation/09-02-SUMMARY.md
@.planning/phases/09-openapi-release-preparation/09-03-SUMMARY.md
@CHANGELOG.md
@docs/PROVIDERS.md
@unraid/sublarr.xml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write CHANGELOG and Migration Guide</name>
  <files>
    CHANGELOG.md
    docs/MIGRATION.md
  </files>
  <action>
1. **Update CHANGELOG.md** with v0.9.0-beta release entry using Keep a Changelog format. The existing CHANGELOG covers v1.0.0-beta. Add the new version above it.

Structure:
```markdown
## [0.9.0-beta] - 2026-02-XX

### Added
- Plugin system with hot-reload for custom subtitle providers (Phase 1)
- 8 new built-in providers: Gestdown, Podnapisi, Kitsunekko, Napisy24, Whisper-Subgen, Titrari, LegendasDivx (Phase 1)
- Provider health monitoring with auto-disable and cooldown (Phase 1)
- Translation multi-backend: DeepL, LibreTranslate, OpenAI-compatible, Google Cloud (Phase 2)
- Per-profile backend selection with automatic fallback chains (Phase 2)
- Media server abstraction: Plex, Kodi support alongside Jellyfin/Emby (Phase 3)
- Whisper speech-to-text integration: faster-whisper and Subgen backends (Phase 4)
- Standalone mode: folder-watch operation without Sonarr/Radarr (Phase 5)
- TMDB, AniList, TVDB metadata lookup for standalone mode (Phase 5)
- Forced/signs subtitle detection and per-series management (Phase 6)
- Event bus with shell script hooks and outgoing webhooks (Phase 7)
- Configurable scoring weights and per-provider score modifiers (Phase 7)
- UI internationalization: English and German (Phase 8)
- Dark/light theme toggle with system preference detection (Phase 8)
- Full backup/restore (config + database as ZIP) with schedule support (Phase 8)
- Statistics page with charts and time-range filters (Phase 8)
- Subtitle tools: timing adjust, encoding fix, HI removal, style strip (Phase 8)
- OpenAPI 3.0.3 specification with Swagger UI at /api/docs (Phase 9)
- Incremental wanted scan with parallel ffprobe (Phase 9)
- Parallel wanted search processing (Phase 9)
- Extended /health/detailed with all subsystem checks (Phase 9)
- Tasks page showing background scheduler status (Phase 9)
- Route-level code splitting for frontend performance (Phase 9)

### Changed
- Architecture: Application Factory pattern with 15 Flask Blueprints (from monolithic server.py)
- Database: Split into domain modules (from monolithic database.py)
- Version numbering: Changed from v1.0.0-beta to v0.9.0-beta (pre-release convention)
- Settings page split into focused tab components (from 4700-line monolith)

### Fixed
- [List any specific bug fixes from the phases]

### Migration Notes
- See docs/MIGRATION.md for upgrade instructions from v1.0.0-beta
```

Derive the specific entries from the STATE.md decisions and the phase completion summaries. Include all major features from Phases 0-9.

2. **Create docs/MIGRATION.md:**

Structure:
```markdown
# Migration Guide: v1.0.0-beta to v0.9.0-beta

## Version Renumbering

Sublarr has adopted standard pre-release versioning. The initial v1.0.0-beta was premature -- v1.0.0 is now reserved for the final stable release after community testing. The version sequence is: v1.0.0-beta (old) -> v0.9.0-beta (this release) -> v1.0.0 (stable).

## What's New

[Brief 1-paragraph summary referencing CHANGELOG]

## Upgrade Steps

### Docker (recommended)
1. Pull the new image: `docker pull ghcr.io/sublarr/sublarr:0.9.0-beta`
2. Stop the existing container
3. Update docker-compose.yml (or Unraid template)
4. Start with new image
5. Database migrations run automatically on startup

### Configuration Changes
- **New environment variables:** [list any new SUBLARR_ vars]
- **Removed variables:** [list any removed vars]
- **Changed defaults:** [list changed defaults]

### Breaking API Changes
- [List any breaking changes, likely none]
- Architecture change: server.py split into Blueprints -- if you referenced internal modules, update imports

### Plugin System
- Custom plugins can now be installed in /config/plugins/
- See docs/PROVIDERS.md for plugin development guide

### New Features Requiring Configuration
- Translation backends: Configure in Settings > Translation Backends
- Media servers: Configure in Settings > Media Servers
- Whisper: Enable in Settings > Whisper
- Standalone mode: Configure in Settings > Library Sources
- i18n: Switch language in UI header
- Theme: Toggle in UI header

## Troubleshooting

### Database Migration Issues
[Steps to manually trigger migration or restore from backup]

### Plugin Loading Errors
[Common plugin issues and solutions]
```
  </action>
  <verify>
Verify files exist and have content:
`wc -l CHANGELOG.md docs/MIGRATION.md`

Expected: CHANGELOG.md is significantly larger than before. MIGRATION.md exists with 50+ lines.
  </verify>
  <done>
  - CHANGELOG.md has complete v0.9.0-beta entry with all Phase 0-9 features
  - docs/MIGRATION.md covers version renumber rationale, upgrade steps, breaking changes, troubleshooting
  - Keep a Changelog format maintained
  </done>
</task>

<task type="auto">
  <name>Task 2: Write User Guide, update Plugin docs, update Unraid template</name>
  <files>
    docs/USER-GUIDE.md
    docs/PROVIDERS.md
    unraid/sublarr.xml
    docker-compose.yml
  </files>
  <action>
1. **Create docs/USER-GUIDE.md:**

Comprehensive user guide covering all setup scenarios:

```markdown
# Sublarr User Guide

## Quick Start

### Prerequisites
- Docker or Docker Compose
- Media library accessible on the filesystem
- (Optional) Sonarr and/or Radarr for library management
- (Optional) Ollama for LLM-based subtitle translation

### Docker Compose (Recommended)
[docker-compose.yml example with all environment variables explained]

### Unraid
[Unraid Community Apps template reference]

## Setup Scenarios

### Scenario 1: Sonarr + Radarr (Recommended)
[Step-by-step: configure Sonarr/Radarr instances, path mappings, webhooks, language profiles]

### Scenario 2: Standalone Mode (No *arr Apps)
[Step-by-step: configure watched folders, metadata providers (TMDB/AniList), scan settings]

### Scenario 3: Mixed Mode
[Both Sonarr/Radarr and standalone folders]

## Configuration

### Language Profiles
[How to create profiles, assign to series, multi-language setup]

### Translation Backends
[Ollama (default), DeepL, LibreTranslate, OpenAI-compatible, Google -- configuration and comparison]

### Subtitle Providers
[Provider overview, API key requirements, priority and scoring explanation]

### Webhooks (Sonarr/Radarr)
[How to configure webhooks in Sonarr/Radarr pointing to Sublarr]

## Features

### Wanted System
[How wanted scan/search works, manual vs automatic]

### Subtitle Scoring
[How scoring works, ASS bonus, customization]

### Forced Subtitles
[What forced subs are, how to enable per-series]

### Backup & Restore
[How to create/schedule/restore backups]

## Troubleshooting

### Common Issues
- Sonarr/Radarr connection failed -> check URL, API key, network
- Provider search returns no results -> check API keys, enable more providers
- Translation quality poor -> adjust prompt preset, try different backend
- Subtitles not detected -> check ffprobe installation, file permissions

### FAQ
[5-10 frequently asked questions]
```

2. **Update docs/PROVIDERS.md:**
   - Add the 8 new providers from Phase 1 to the provider list
   - Add a "Plugin Development" section (or expand existing one) with:
     - How to create a plugin (plugin directory, manifest, SubtitleProvider ABC)
     - Template reference
     - Configuration fields pattern
     - Testing a plugin
     - Hot-reload behavior

3. **Update unraid/sublarr.xml:**
   - Read the existing template
   - Update version references to 0.9.0-beta
   - Add new feature descriptions
   - Ensure port (5765), volume mounts (/config, /media) are correct
   - Add new environment variables if any were added in Phase 2-9
   - Update the description to mention new capabilities (multi-backend translation, Whisper, standalone mode, etc.)

4. **Review docker-compose.yml:**
   - Ensure the image tag references are appropriate (e.g., `ghcr.io/sublarr/sublarr:latest` or version-tagged)
   - Verify volume mounts and environment variables are documented
   - No functional changes needed -- just verify consistency
  </action>
  <verify>
Verify all docs exist and have substantial content:
`wc -l docs/USER-GUIDE.md docs/PROVIDERS.md docs/MIGRATION.md unraid/sublarr.xml`

Expected: USER-GUIDE.md has 150+ lines. PROVIDERS.md is larger than before. Unraid template exists and mentions 0.9.0-beta.
  </verify>
  <done>
  - docs/USER-GUIDE.md covers all setup scenarios (Sonarr+Radarr, standalone, Docker, Unraid)
  - docs/PROVIDERS.md updated with 8 new providers and plugin development section
  - unraid/sublarr.xml updated with new features and v0.9.0-beta references
  - docker-compose.yml reviewed for consistency
  - All version strings consistent across documentation
  </done>
</task>

</tasks>

<verification>
1. CHANGELOG.md has v0.9.0-beta entry above v1.0.0-beta entry
2. Migration guide covers version renumber, upgrade steps, and breaking changes
3. User guide covers 3 setup scenarios with step-by-step instructions
4. Plugin development guide has enough detail for a developer to create a new provider
5. Unraid template mentions v0.9.0-beta and new features
6. `grep -r "0.1.0" backend/ --include="*.py"` returns zero results (no old version strings)
</verification>

<success_criteria>
- CHANGELOG.md complete with all Phase 0-9 features
- Migration guide explains version change and upgrade path
- User guide covers Sonarr+Radarr, standalone, and Docker setup
- Plugin developer docs enable creating a new provider
- Unraid template updated for v0.9.0-beta
- Version strings consistent across all files
</success_criteria>

<output>
After completion, create `.planning/phases/09-openapi-release-preparation/09-05-SUMMARY.md`
</output>
